(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sku-index"],{"0021":function(e,t,i){"use strict";var s=i("8642"),n=i.n(s);n.a},"037c":function(e,t,i){var s=i("c2a0");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("49c6b3f2",s,!0,{sourceMap:!1,shadowMode:!1})},"0525":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,".tui-sku-row__item[data-v-54598234]{max-width:100%;min-width:%?200?%;height:%?64?%;display:-webkit-inline-flex;display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background:#f7f7f7;padding:0 %?26?%;box-sizing:border-box;margin-right:%?20?%;margin-bottom:%?20?%;font-size:%?26?%;position:relative}.tui-sku-row__item .tui-sku-row__item-img[data-v-54598234]{z-index:1;width:%?48?%;height:%?48?%;margin:%?8?% 0 %?8?% %?8?%;object-fit:cover;border-radius:%?4?%}.tui-sku-row__item .tui-sku-row__item-name[data-v-54598234]{z-index:1;padding:8px}.tui-sku-row__item--active[data-v-54598234]{background:#fcedea!important;color:#ee0a24}.tui-sku-row__item--disabled[data-v-54598234]{color:#c8c9cc;background:#f2f3f5;cursor:not-allowed}",""]),e.exports=t},"0cdb":function(e,t,i){"use strict";var s={vanButton:i("7e65").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"van-sku-actions"},[i("van-button",{staticClass:"van-button",attrs:{size:"large",type:"warning",round:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createEmitter("sku:addCart")}}},[e._v("加入购物车")]),i("van-button",{staticClass:"van-button",attrs:{round:!0,size:"large",type:"danger"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createEmitter("sku:buy")}}},[e._v("立即购买")])],1)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},"0d62":function(e,t,i){"use strict";var s,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"tui-sku-row__item",class:{"tui-sku-row__item--active":e.skuValue.id===e.selectedSku[e.skuKeyStr],"tui-sku-row__item--disabled":!e.chooseable},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onSelect.apply(void 0,arguments)}}},[e.skuValue.imgUrl?i("v-uni-image",{staticClass:"tui-sku-row__item-img",attrs:{src:e.skuValue.imgUrl}}):e._e(),i("v-uni-text",{staticClass:"tui-sku-row__item-name"},[e._v(e._s(e.skuValue.name))])],1)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},"13d5":function(e,t,i){"use strict";var s=i("23e7"),n=i("d58f").left,u=i("a640"),r=i("ae40"),a=u("reduce"),o=r("reduce",{1:0});s({target:"Array",proto:!0,forced:!a||!o},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1655:function(e,t,i){"use strict";i.r(t);var s=i("17e3"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},"17e3":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={props:{skuRow:null}};t.default=s},"1a43":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,".tui-sku-row__title[data-v-04c13a60]{padding:%?20?% 0;color:#323233;font-size:%?30?%}",""]),e.exports=t},"1a4a":function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,'@charset "UTF-8";.van-sku-header[data-v-ed8eed9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin:0 %?32?%}.tui-sku-header__img-wrap[data-v-ed8eed9c]{height:%?220?%;width:%?220?%;overflow:hidden;background:#f7f8fa;border-radius:%?10?%;margin:%?24?% 0}.tui-sku-header__img-wrap .tui-goods-img[data-v-ed8eed9c]{max-width:100%;max-height:100%;margin:auto}.tui-sku-header__goods-info[data-v-ed8eed9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;min-height:96px;padding:%?24?% %?40?% %?24?% %?30?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.tui-sku__goods-price[data-v-ed8eed9c]{color:#ee0a24}.tui-sku__price-symbol[data-v-ed8eed9c]{font-size:%?34?%}.tui-sku__price-num[data-v-ed8eed9c]{font-weight:500;font-size:%?50?%;word-wrap:break-word}.tui-sku-header-item[data-v-ed8eed9c]{margin-top:8px;color:#969799;font-size:%?28?%;line-height:1.3}.tui-sku-group-container[data-v-ed8eed9c]{padding-top:%?20?%}.tui-popup-scroll[data-v-ed8eed9c]{height:%?600?%;font-size:%?26?%}.tui-scrollview-box[data-v-ed8eed9c]{box-sizing:border-box}.tui-sku-row[data-v-ed8eed9c]{margin:0 %?30?% %?24?%}.tui-sku-row__title[data-v-ed8eed9c]{padding:%?20?% 0;color:#323233;font-size:%?28?%}.tui-attr-box[data-v-ed8eed9c]{font-size:0;padding:%?20?% 0}.tui-sku__stock .tui-sku__stock-num[data-v-ed8eed9c]{padding:0 %?8?%}.tui-sku__stock .tui-sku__stock-num--highlight[data-v-ed8eed9c]{color:#ee0a24}.tui-number-box[data-v-ed8eed9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?20?% 0 %?30?% 0;box-sizing:border-box}.tui-operation[data-v-ed8eed9c]{width:100%;height:%?100?%;background:hsla(0,0%,100%,.98);position:fixed;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;z-index:10;bottom:0;left:0;padding-bottom:env(safe-area-inset-bottom)}.tui-safearea-bottom[data-v-ed8eed9c]{width:100%;height:env(safe-area-inset-bottom)}.tui-operation[data-v-ed8eed9c]::before{content:"";position:absolute;top:0;right:0;left:0;border-top:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.tui-operation-left[data-v-ed8eed9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.tui-operation-item[data-v-ed8eed9c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;position:relative}.tui-operation-text[data-v-ed8eed9c]{font-size:%?22?%;color:#333}.tui-opacity[data-v-ed8eed9c]{opacity:.5}.tui-scale-small[data-v-ed8eed9c]{-webkit-transform:scale(.9);transform:scale(.9);-webkit-transform-origin:center center;transform-origin:center center}.tui-operation-right[data-v-ed8eed9c]{height:%?100?%;padding-top:0}.tui-right-flex[data-v-ed8eed9c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.tui-flex-1[data-v-ed8eed9c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?16?%}\n/*底部操作栏*/\n/*底部选择弹层*/.tui-popup-class[data-v-ed8eed9c]{border-top-left-radius:%?24?%;border-top-right-radius:%?24?%;padding-bottom:env(safe-area-inset-bottom)}.tui-popup-box[data-v-ed8eed9c]{position:relative;padding:%?30?% 0 %?100?% 0}.tui-popup-btn[data-v-ed8eed9c]{width:100%;position:absolute;left:0;bottom:0}.tui-right[data-v-ed8eed9c]{position:absolute;right:%?30?%;top:%?30?%}',""]),e.exports=t},"249d":function(e,t,i){"use strict";(function(e){var s=i("ee27");i("99af"),i("4de4"),i("c740"),i("4160"),i("a15b"),i("d81d"),i("13d5"),i("45fc"),i("a9e3"),i("b680"),i("b64b"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("fc11")),u=s(i("f3f3")),r=s(i("855c")),a=s(i("bec4")),o=s(i("8070")),c=s(i("e3cd")),d=i("6cc6"),l=i("7352"),f=l.LIMIT_TYPE.QUOTA_LIMIT,p={components:{skuRowItem:a.default,skuRow:r.default,skuStepper:o.default,skuActions:c.default},computed:{skuImg:function(){return this.getSkuImg(this.sku,this.selectedSku)||this.goods.picture},isSkuCombSelected:function(){var e=this;return!(this.hasSku&&!(0,d.isAllSelected)(this.skuTree,this.selectedSku))&&!this.propList.some((function(t){return(e.selectedProp[t.k_id]||[]).length<1}))},isSkuEmpty:function(){return 0===Object.keys(this.sku).length},hasSku:function(){return!this.sku.none_sku},hasSkuOrAttr:function(){return this.hasSku||this.propList.length>0},selectedSkuComb:function(){var e=null;return this.isSkuCombSelected&&(e=this.hasSku?(0,d.getSkuComb)(this.sku.list,this.selectedSku):{id:this.sku.collection_id,price:Math.round(100*this.sku.price),stock_num:this.sku.stock_num},e&&(e.properties=(0,d.getSelectedProperties)(this.propList,this.selectedProp),e.property_price=this.selectedPropValues.reduce((function(e,t){return e+(t.price||0)}),0))),e},selectedSkuValues:function(){return(0,d.getSelectedSkuValues)(this.skuTree,this.selectedSku)},selectedPropValues:function(){return(0,d.getSelectedPropValues)(this.propList,this.selectedProp)},price:function(){return this.selectedSkuComb?((this.selectedSkuComb.price+this.selectedSkuComb.property_price)/100).toFixed(2):this.sku.price},originPrice:function(){return this.selectedSkuComb&&this.selectedSkuComb.origin_price?((this.selectedSkuComb.origin_price+this.selectedSkuComb.property_price)/100).toFixed(2):this.sku.origin_price},skuTree:function(){return this.sku.tree||{}},propList:function(){return this.properties||[]},imageList:function(){var e=[this.goods.picture];return this.skuTree.length>0&&this.skuTree.forEach((function(t){t.v&&t.v.forEach((function(t){var i=t.previewImgUrl||t.imgUrl||t.img_url;i&&e.push(i)}))})),e},stock:function(){var e=this.customStepperConfig.stockNum;return void 0!==e?e:this.selectedSkuComb?this.selectedSkuComb.stock_num:this.sku.stock_num},stockText:function(){var e=this.customStepperConfig.stockFormatter;return e?e(this.stock):"剩余"+"<span class={('tui-stock-num', { highlight: this.stock < this.stockThreshold })}>".concat(this.stock,"</span>")+"件"},selectedText:function(){var e=this;if(this.selectedSkuComb){var t=this.selectedSkuValues.concat(this.selectedPropValues);return"已选 ".concat(t.map((function(e){return e.name})).join("；"))}var i=this.skuTree.filter((function(t){return e.selectedSku[t.k_s]===l.UNSELECTED_SKU_VALUE_ID})).map((function(e){return e.k})),s=this.propList.filter((function(t){return(e.selectedProp[t.k_id]||[]).length<1})).map((function(e){return e.k}));return"选择 ".concat(i.concat(s).join("；"))}},props:{sku:{type:Object},goods:{type:Object},goodsId:[Number,String],properties:{type:Array,default:function(){return[]}},value:Boolean,customStepperConfig:{type:Object,default:function(){return{}}},quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},stockThreshold:{type:Number,default:50},startSaleNum:{type:Number,default:1},initialSku:{type:Object,default:function(){return{}}},hideStock:Boolean,stepperTitle:String,hideQuotaText:Boolean,disableStepperInput:Boolean,resetStepperOnHide:Boolean,resetSelectedSkuOnHide:Boolean},data:function(){return{selectedSku:{},selectedProp:{},selectedNum:1,skuEventBus:null,show:this.value}},watch:{show:function(e){this.$emit("input",e),e||(this.$emit("sku-close",{selectedSkuValues:this.selectedSkuValues,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}),this.resetStepperOnHide&&this.resetStepper(),this.resetSelectedSkuOnHide&&this.resetSelectedSku())},value:function(e){this.show=e},skuTree:"resetSelectedSku",initialSku:function(){this.resetStepper(),this.resetSelectedSku()}},created:function(){uni.$on("sku:select",this.onSelect),uni.$on("sku:propSelect",this.onPropSelect),uni.$on("sku:numChange",this.onNumChange),uni.$on("sku:stepperState",this.onStepperState),uni.$on("sku:overLimit",this.onOverLimit),uni.$on("sku:addCart",this.onAddCart),uni.$on("sku:buy",this.onBuy),this.resetStepper(),this.resetSelectedSku()},methods:{resetStepper:function(){var e=this.initialSku.selectedNum,t=void 0!==e&&null!==e?e:this.startSaleNum;this.stepperError=null,this.selectedNum=t},resetSelectedSku:function(){var e=this;this.selectedSku={},this.skuTree.forEach((function(t){e.selectedSku[t.k_s]=e.initialSku[t.k_s]||l.UNSELECTED_SKU_VALUE_ID}));var t=this.selectedSkuValues;t.length>0&&this.$nextTick((function(){e.$emit("sku-selected",{skuValue:t[t.length-1],selectedSku:e.selectedSku,selectedSkuComb:e.selectedSkuComb})})),this.selectedProp={};var i=this.initialSku.selectedProp,s=void 0===i?{}:i;this.propList.forEach((function(t){t.v&&1===t.v.length?e.selectedProp[t.k_id]=[t.v[0].id]:s[t.k_id]&&(e.selectedProp[t.k_id]=s[t.k_id])}));var n=this.selectedPropValues;n.length>0&&this.$emit("sku-prop-selected",{propValue:n[n.length-1],selectedProp:this.selectedProp,selectedSkuComb:this.selectedSkuComb}),this.$emit("sku-reset",{selectedSku:this.selectedSku,selectedProp:this.selectedProp,selectedSkuComb:this.selectedSkuComb})},getSkuImg:function(e,t){var i;return e.tree.some((function(e){var s=t[e.k_s];if(s&&e.v){var n=e.v.filter((function(e){return e.id===s}))[0]||{};return i=n.previewImgUrl||n.imgUrl||n.img_url,i}return!1})),i},closeSkuBox:function(){this.show=!1},validateSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.validateMessages():""},validateSku:function(){if(0===this.selectedNum)return"商品已经无法购买啦";if(!this.isSkuCombSelected){if(this.customSkuValidator){var e=this.customSkuValidator(this);if(e)return e}return"请先选择商品规格"}},onSelect:function(e){this.selectedSku=this.selectedSku[e.skuKeyStr]===e.id?(0,u.default)({},this.selectedSku,(0,n.default)({},e.skuKeyStr,"")):(0,u.default)({},this.selectedSku,(0,n.default)({},e.skuKeyStr,e.id)),this.$emit("sku-selected",{skuValue:e,selectedSku:this.selectedSku,selectedSkuComb:this.selectedSkuComb})},onPropSelect:function(){},previewImage:function(){e.log("preview image");var t=this.skuImg,i=this.imageList.findIndex((function(e){return e===t})),s={index:i,imageList:this.imageList,indexImage:t};this.$emit("open-preview",s),uni.previewImage({urls:this.imageList,current:i})},onChange:function(e){this.$emit("stepper-change",e)},onNumChange:function(e){this.selectedNum=e},onStepperState:function(e){e.valid?this.stepperError=null:this.stepperError=(0,u.default)({},e,{action:"plus"})},onOverLimit:function(e){var t=e.action,i=e.limitType,s=e.quota,n=e.quotaUsed,u=this.customStepperConfig.handleOverLimit;u?u(e):"minus"===t?this.startSaleNum>1?this.$refs.toast({message:this.startSaleNum+"件起售"}):this.$refs.toast.show({message:"至少选择一件"}):"plus"===t&&(i===f?n>0?this.$refs.toast.show({message:"每人限购"+s+"件，你已购买"+n+"件"}):this.$refs.toast.show({message:"每人限购"+s+"件"}):this.$refs.toast.show({message:"库存不足"}))},onAddCart:function(){this.onBuyOrAddCart("add-cart")},onBuy:function(){this.onBuyOrAddCart("buy-clicked")},onBuyOrAddCart:function(t){if(this.stepperError)return this.onOverLimit(this.stepperError);var i=this.validateSku();i?(e.log("validate error:",i),this.$refs.toast.show({message:i})):this.$emit(t,this.getSkuData())},getSkuData:function(){return{goodsId:this.goodsId,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}}}};t.default=p}).call(this,i("5a52")["default"])},"38f5":function(e,t,i){"use strict";var s,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"tui-sku-row__title"},[e._v(e._s(e.skuRow.k))]),e._t("default")],2)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},"413e":function(e,t,i){"use strict";i.r(t);var s=i("88b8"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},4368:function(e,t,i){"use strict";var s=i("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("f3f3")),u=i("6cc6"),r={props:{skuValue:Object,skuKeyStr:String,selectedSku:Object,skuList:{type:Array,default:function(){return[]}}},computed:{chooseable:function(){return(0,u.isSkuChoosable)(this.skuList,this.selectedSku,{key:this.skuKeyStr,valueId:this.skuValue.id})}},methods:{onSelect:function(){this.chooseable&&uni.$emit("sku:select",(0,n.default)({},this.skuValue,{skuKeyStr:this.skuKeyStr}))}}};t.default=r},"4d70":function(e,t,i){"use strict";var s=i("037c"),n=i.n(s);n.a},5626:function(e,t,i){var s=i("1a4a");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("98e91d34",s,!0,{sourceMap:!1,shadowMode:!1})},"56f3":function(e,t,i){"use strict";var s=i("5626"),n=i.n(s);n.a},"6cc6":function(e,t,i){"use strict";var s=i("ee27");i("a623"),i("4de4"),i("4160"),i("c975"),i("13d5"),i("b64b"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getSelectedProperties=t.getSelectedPropValues=t.isSkuChoosable=t.getSelectedSkuValues=t.getSkuComb=t.isAllSelected=t.normalizePropList=t.normalizeSkuTree=void 0;var n=s(i("fc11")),u=s(i("f3f3")),r=i("7352"),a=function(e){var t={};return e.forEach((function(e){t[e.k_s]=e.v})),t};t.normalizeSkuTree=a;var o=function(e){var t={};return e.forEach((function(e){var i={};e.v.forEach((function(e){i[e.id]=e})),t[e.k_id]=i})),t};t.normalizePropList=o;var c=function(e,t){var i=Object.keys(t).filter((function(e){return t[e]!==r.UNSELECTED_SKU_VALUE_ID}));return e.length===i.length};t.isAllSelected=c;var d=function(e,t){var i=e.filter((function(e){return Object.keys(t).every((function(i){return String(e[i])===String(t[i])}))}));return i[0]};t.getSkuComb=d;var l=function(e,t){var i=a(e);return Object.keys(t).reduce((function(e,s){var n=i[s],u=t[s];if(u!==r.UNSELECTED_SKU_VALUE_ID){var a=n.filter((function(e){return e.id===u}))[0];a&&e.push(a)}return e}),[])};t.getSelectedSkuValues=l;var f=function(e,t,i){var s=i.key,a=i.valueId,o=(0,u.default)({},t,(0,n.default)({},s,a)),c=Object.keys(o).filter((function(e){return o[e]!==r.UNSELECTED_SKU_VALUE_ID})),d=e.filter((function(e){return c.every((function(t){return String(o[t])===String(e[t])}))})),l=d.reduce((function(e,t){return e+=t.stock_num,e}),0);return l>0};t.isSkuChoosable=f;var p=function(e,t){var i=o(e);return Object.keys(t).reduce((function(e,s){return t[s].forEach((function(t){e.push((0,u.default)({},i[s][t]))})),e}),[])};t.getSelectedPropValues=p;var k=function(e,t){var i=[];return(e||[]).forEach((function(e){if(t[e.k_id]&&t[e.k_id].length>0){var s=[];e.v.forEach((function(i){t[e.k_id].indexOf(i.id)>-1&&s.push((0,u.default)({},i))})),i.push((0,u.default)({},e,{v:s}))}})),i};t.getSelectedProperties=k;var h={normalizeSkuTree:a,getSkuComb:d,getSelectedSkuValues:l,isAllSelected:c,isSkuChoosable:f,getSelectedPropValues:p,getSelectedProperties:k};t.default=h},7352:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UNSELECTED_SKU_VALUE_ID=t.LIMIT_TYPE=void 0;var s={QUOTA_LIMIT:0,STOCK_LIMIT:1};t.LIMIT_TYPE=s;var n="";t.UNSELECTED_SKU_VALUE_ID=n;var u={LIMIT_TYPE:s,UNSELECTED_SKU_VALUE_ID:n};t.default=u},"75af":function(e,t,i){"use strict";i.r(t);var s=i("4368"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},7955:function(e,t,i){"use strict";i.r(t);var s=i("7c95"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},"7aa1":function(e,t,i){"use strict";var s={vanStepper:i("1136").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"tui-sku-stepper-stock tui-padding"},[i("v-uni-text",{staticClass:"van-sku__stepper-title"},[e._v(e._s(e.stepperTitle||"购买数量"))]),i("van-stepper",{staticClass:"stepper",attrs:{value:e.currentNum,min:e.stepperMinLimit,max:e.stepperLimit,disabled:e.disableStepperInput},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}})],1)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},"7c95":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i("c7e3"),n={data:function(){return{show:!1,initialSku:{s1:"2",s2:"3",selectedNum:3,selectedProp:{123:[1222]}},goods:{picture:"https://img.yzcdn.cn/upload_files/2017/03/16/Fs_OMbSFPa183sBwvG_94llUYiLa.jpeg?imageView2/2/w/100/h/100/q/75/format/jpg"},sku:s,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0,properties:[{k_id:123,k:"加料",is_multiple:!0,v:[{id:1222,name:"珍珠",price:1},{id:1223,name:"椰果",price:1}]}]}},methods:{test:function(){this.show=!this.show},onStepperChange:function(t){e.log(event)},onBuyClicked:function(t){uni.showToast({title:"点击购买"}),e.log("立即购买",t)},onAddCartClicked:function(){uni.showToast({title:"加入购物车"}),e.log("加入购物车")}}};t.default=n}).call(this,i("5a52")["default"])},8070:function(e,t,i){"use strict";i.r(t);var s=i("7aa1"),n=i("413e");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("4d70");var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"04378625",null,!1,s["a"],r);t["default"]=o.exports},8551:function(e,t,i){"use strict";var s={vanSku:i("ed66").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.test.apply(void 0,arguments)}}},[e._v("点击")]),i("van-sku",{attrs:{sku:e.sku,goods:e.goods,quota:0,"quota-used":0,stockThreshold:11,resetStepperOnHide:!0,resetSelectedSkuOnHide:!0},on:{"buy-clicked":function(t){arguments[0]=t=e.$handleEvent(t),e.onBuyClicked.apply(void 0,arguments)},"add-cart":function(t){arguments[0]=t=e.$handleEvent(t),e.onAddCartClicked.apply(void 0,arguments)},"stepper-change":function(t){arguments[0]=t=e.$handleEvent(t),e.onStepperChange.apply(void 0,arguments)}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},"855c":function(e,t,i){"use strict";i.r(t);var s=i("38f5"),n=i("1655");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("c467");var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"04c13a60",null,!1,s["a"],r);t["default"]=o.exports},8642:function(e,t,i){var s=i("0525");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("6778f626",s,!0,{sourceMap:!1,shadowMode:!1})},8689:function(e,t,i){"use strict";var s=i("daaa"),n=i.n(s);n.a},"88b8":function(e,t,i){"use strict";i("a15b"),i("a9e3"),i("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i("7352"),n=s.LIMIT_TYPE.QUOTA_LIMIT,u=s.LIMIT_TYPE.STOCK_LIMIT,r={props:{stock:Number,skuStockNum:Number,selectedNum:Number,stepperTitle:String,disableStepperInput:Boolean,customStepperConfig:Object,hideQuotaText:Boolean,quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},startSaleNum:{type:Number,default:1}},data:function(){return{currentNum:this.selectedNum,limitType:u}},watch:{currentNum:function(e){var t=parseInt(e,10);t>=this.stepperMinLimit&&t<=this.stepperLimit&&uni.$emit("sku:numChange",t)},stepperLimit:function(e){e<this.currentNum&&this.stepperMinLimit<=e&&(this.currentNum=e),this.checkState(this.stepperMinLimit,e)},stepperMinLimit:function(e){(e>this.currentNum||e>this.stepperLimit)&&(this.currentNum=e),this.checkState(e,this.stepperLimit)}},computed:{stepperLimit:function(){var e,t=this.quota-this.quotaUsed;return this.quota>0&&t<=this.stock?(e=t<0?0:t,this.limitType=n):(e=this.stock,this.limitType=u),e},stepperMinLimit:function(){return this.startSaleNum<1?1:this.startSaleNum},quotaText:function(){var e=this.customStepperConfig,t=e.quotaText,i=e.hideQuotaText;if(i)return"";var s="";if(t)s=t;else{var n=[];this.startSaleNum>1&&n.push(this.startSaleNum+"件起售"),this.quota>0&&n.push("限购"+this.quota+"件"),s=n.join("，")}return s}},created:function(){this.checkState(this.stepperMinLimit,this.stepperLimit)},methods:{setCurrentNum:function(e){this.currentNum=e,this.checkState(this.stepperMinLimit,this.stepperLimit)},onOverLimit:function(e){uni.$emit("sku:overLimit",{action:e,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed,startSaleNum:this.startSaleNum})},onChange:function(e){var t=parseInt(e.value,10);this.currentNum=t;var i=this.customStepperConfig.handleStepperChange;i&&i(t),this.$emit("change",t)},checkState:function(e,t){this.currentNum<e||e>t?this.currentNum=e:this.currentNum>t&&(this.currentNum=t),uni.$emit("sku:stepperState",{valid:e<=t,min:e,max:t,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed,startSaleNum:this.startSaleNum})}}};t.default=r},b2c2:function(e,t,i){"use strict";i.r(t);var s=i("249d"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},bec4:function(e,t,i){"use strict";i.r(t);var s=i("0d62"),n=i("75af");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("0021");var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"54598234",null,!1,s["a"],r);t["default"]=o.exports},c2a0:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,".tui-sku-stepper-stock[data-v-04378625]{display:-webkit-box;display:-webkit-flex;display:flex;margin-bottom:%?20?%;padding:0 %?30?%;box-sizing:border-box}.stepper[data-v-04378625]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.van-sku__stepper-title[data-v-04378625]{color:#323233;font-size:%?30?%}",""]),e.exports=t},c467:function(e,t,i){"use strict";var s=i("fbc6"),n=i.n(s);n.a},c7e3:function(e,t){e.exports={tree:[{k:"颜色",v:[{id:"1",name:"红色",imgUrl:"https://img.yzcdn.cn/upload_files/2017/02/21/FjKTOxjVgnUuPmHJRdunvYky9OHP.jpg!100x100.jpg",previewImgUrl:"https://img.yzcdn.cn/upload_files/2017/02/21/FjKTOxjVgnUuPmHJRdunvYky9OHP.jpg!100x100.jpg"},{id:"2",name:"蓝色",imgUrl:"https://img.yzcdn.cn/2.jpg",previewImgUrl:"https://img.yzcdn.cn/2p.jpg"}],k_s:"s1"},{k:"尺码",v:[{id:"3",name:"S码"},{id:"4",name:"M码"}],k_s:"s2"}],list:[{id:2259,price:100,s1:"1",s2:"3",stock_num:10},{id:23e3,s1:"1",s2:"4",price:200,stock_num:3120},{id:23e3,s1:"2",s2:"3",price:300,stock_num:11120},{id:23e3,s1:"2",s2:"4",price:400,stock_num:0}],price:"1.00",stock_num:22997,collection_id:2261,none_sku:!1,messages:[{datetime:"0",multiple:"0",name:"留言",type:"text",required:"1",placeholder:""}],hide_stock:!1}},cf0d:function(e,t,i){"use strict";i.r(t);var s=i("8551"),n=i("7955");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"09533510",null,!1,s["a"],r);t["default"]=o.exports},daaa:function(e,t,i){var s=i("eacc");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("28dbb287",s,!0,{sourceMap:!1,shadowMode:!1})},e3cd:function(e,t,i){"use strict";i.r(t);var s=i("0cdb"),n=i("f10d");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("8689");var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"e07b3654",null,!1,s["a"],r);t["default"]=o.exports},eacc:function(e,t,i){var s=i("24fb");t=s(!1),t.push([e.i,".van-sku-actions[data-v-e07b3654]{display:-webkit-box;display:-webkit-flex;display:flex;padding:8px 16px}.van-sku-actions .van-button[data-v-e07b3654]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-flex:1;-webkit-flex:1;flex:1}.van-sku-actions .van-button--warning[data-v-e07b3654]{background:-webkit-linear-gradient(left,#ffd01e,#ff8917);background:linear-gradient(90deg,#ffd01e,#ff8917)}.van-sku-actions .van-button--danger[data-v-e07b3654]{background:-webkit-linear-gradient(left,#ff6034,#ee0a24);background:linear-gradient(90deg,#ff6034,#ee0a24)}",""]),e.exports=t},ed66:function(e,t,i){"use strict";i.r(t);var s=i("eeb7"),n=i("b2c2");for(var u in n)"default"!==u&&function(e){i.d(t,e,(function(){return n[e]}))}(u);i("56f3");var r,a=i("f0c5"),o=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"ed8eed9c",null,!1,s["a"],r);t["default"]=o.exports},eeb7:function(e,t,i){"use strict";var s={vanPopup:i("0d1c").default,vanToast:i("6d2d").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-popup",{staticClass:"van-sku-container",attrs:{position:"bottom","safe-area-inset-bottom":!0,closeable:!0,round:!0,borderRadius:"40"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.closeSkuBox.apply(void 0,arguments)}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("v-uni-view",{staticClass:"van-sku-header"},[i("v-uni-view",{staticClass:"tui-sku-header__img-wrap"},[i("v-uni-image",{staticClass:"tui-goods-img",attrs:{src:e.skuImg},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"tui-sku-header__goods-info"},[i("v-uni-view",{staticClass:"tui-sku__goods-price"},[i("v-uni-text",{staticClass:"tui-sku__price-symbol"},[e._v("￥")]),i("v-uni-text",{staticClass:"tui-sku__price-num"},[e._v(e._s(e.price))])],1),i("v-uni-view",{staticClass:"tui-sku-header-item"},[e.hideStock?e._e():i("span",{staticClass:"tui-sku__stock"},[e._v("剩余"),i("span",{staticClass:"tui-sku__stock-num",class:{"tui-sku__stock-num--highlight":e.stock<e.stockThreshold}},[e._v(e._s(e.stock))]),e._v("件")])]),i("v-uni-view",{staticClass:"tui-sku-header-item"},[e._v(e._s(e.selectedText))])],1)],1),i("v-uni-scroll-view",{staticClass:"tui-sku-body",staticStyle:{"max-height":"550rpx"},attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"tui-scrollview-box"},[i("v-uni-view",{staticClass:"tui-sku-group-container"},[e._l(e.skuTree,(function(t,s){return i("v-uni-view",{key:s,staticClass:"tui-sku-row"},[i("skuRow",{attrs:{skuRow:t}},[e._t("default",[e._l(t.v,(function(s,n){return[i("skuRowItem",{key:n+"_0",attrs:{skuList:e.sku.list,skuValue:s,selectedSku:e.selectedSku,skuKeyStr:t.k_s}})]}))])],2)],1)})),i("skuStepper",{ref:"skuStepper",attrs:{stock:e.stock,quota:e.quota,quotaUsed:e.quotaUsed,startSaleNum:e.startSaleNum,selectedNum:e.selectedNum,stepperTitle:e.stepperTitle,skuStockNum:e.sku.stock_num,disableStepperInput:e.disableStepperInput,customStepperConfig:e.customStepperConfig,hideQuotaText:e.hideQuotaText},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}})],2)],1)],1),i("skuActions"),i("van-toast",{ref:"toast"})],1)},u=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return s}))},f10d:function(e,t,i){"use strict";i.r(t);var s=i("f652"),n=i.n(s);for(var u in s)"default"!==u&&function(e){i.d(t,e,(function(){return s[e]}))}(u);t["default"]=n.a},f652:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={props:{},methods:{createEmitter:function(e){uni.$emit(e)}}};t.default=s},fbc6:function(e,t,i){var s=i("1a43");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("4f06").default;n("041b3753",s,!0,{sourceMap:!1,shadowMode:!1})}}]);